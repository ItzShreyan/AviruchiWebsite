<!DOCTYPE html>
<html lang="en">
head>
  <meta charset="UTF-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge"/>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Aviruchi — Authentic Indian Sweets</title>

  <!-- Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@600;700&family=Inter:wght@300;400;600;700&display=swap" rel="stylesheet">

  <!-- Styles -->
  <style>
    :root{
      --ink:#302A27;
      --muted:#6E645F;
      --accent:#BF7B30;
      --card:#FFFFFF;
      --line:#EAE3DC;
      --shadow:0 10px 30px rgba(0,0,0,0.08);
      --radius:16px;
      --danger:#b71c1c;
      --ok:#2f7d31;
    }
    *{box-sizing:border-box}
    html,body{margin:0;color:var(--ink)}
    body{
      font-family:Inter,system-ui,Segoe UI,Helvetica,Arial,sans-serif; line-height:1.6;
      background:
        linear-gradient(rgba(255,255,255,0.86), rgba(255,255,255,0.86)),
        url('Background.jpg') center/cover no-repeat fixed;
    }
    a{color:inherit;text-decoration:none}
    img{max-width:100%;display:block}

    /* Header / Tabs */
    .site-header{
      position:sticky;top:0;z-index:20;background:rgba(255,255,255,0.85);
      backdrop-filter:saturate(180%) blur(14px);
      border-bottom:1px solid var(--line);
    }
    .nav{
      max-width:1150px;margin:0 auto;display:flex;align-items:center;
      padding:14px 20px; gap:28px;
    }
    .brand{display:flex;align-items:center;gap:14px;margin-right:auto}
    .brand img{
      height:42px;width:42px;object-fit:cover;border-radius:50%;
      border:1px solid var(--line); background:#fff;
      box-shadow:0 2px 8px rgba(0,0,0,0.06);
    }
    .brand span{
      font-family:"Playfair Display",serif;font-weight:700;font-size:28px;color:var(--accent);
      text-shadow:0 1px 0 #fff;
    }
    .tabs a{
      margin-left:18px;font-weight:700;color:#5b524c;padding:8px 12px;border-radius:999px
    }
    .tabs a.active{color:#fff;background:var(--accent)}
    .cart{
      margin-left:8px;border:1px solid var(--line);border-radius:999px;padding:8px 14px;
      font-weight:700;background:rgba(255,255,255,0.8)
    }
    .cart .count{
      margin-left:8px;background:var(--accent);color:#fff;border-radius:999px;
      padding:2px 8px;font-size:12px
    }

    .wrap{max-width:1150px;margin:0 auto;padding:0 20px}

    /* Sections (as tabs) */
    section.tab{
      display:none; opacity:0; transform:translateY(6px);
      transition:opacity .35s ease, transform .35s ease;
      padding:32px 0 60px;
    }
    section.tab.active{display:block; opacity:1; transform:translateY(0)}

    /* Hero + search bar like grocery sites */
    .hero{
      display:grid;grid-template-columns:1.1fr 1fr;gap:30px;align-items:center;margin-bottom:16px;
    }
    .hero .copy h1{
      font-family:"Playfair Display",serif;font-size:58px;line-height:1.05;margin:0 0 12px;
      text-shadow:0 1px 0 #fff;
    }
    .hero .copy p{color:var(--muted);max-width:560px;margin:0 0 16px}
    .search-row{
      display:flex;gap:10px;align-items:center;margin:10px 0 24px;
    }
    .search-row input{
      flex:1;padding:12px 14px;border-radius:999px;border:1px solid var(--line);
      font-size:0.98rem;
    }
    .search-row button{
      padding:11px 18px;border-radius:999px;border:none;background:var(--accent);color:#fff;
      font-weight:700;cursor:pointer;
    }
    .search-hint{font-size:0.87rem;color:#8a7e77}
    .cta{
      display:inline-flex;align-items:center;gap:10px;background:var(--accent);color:#fff;
      padding:10px 18px;border-radius:999px;font-weight:700;box-shadow:0 8px 18px rgba(191,123,48,0.28)
    }
    .plate{
      background:linear-gradient(180deg,#fff, #F3EFE9); padding:18px;border-radius:20px;box-shadow:var(--shadow);
      outline:1px solid var(--line)
    }
    .plate img{border-radius:14px}

    /* Products */
    .section h2{
      font-family:"Playfair Display",serif;font-size:40px;margin:0 0 8px;text-align:left;
      text-shadow:0 1px 0 #fff;
    }
    .lead{text-align:left;color:var(--muted);max-width:720px;margin:0 0 18px}
    .grid{display:grid;grid-template-columns:repeat(3,1fr);gap:26px}
    .card{
      background:rgba(255,255,255,0.94); border:1px solid var(--line); border-radius:var(--radius); overflow:hidden;
      box-shadow:var(--shadow); display:flex; flex-direction:column; min-height:100%;
      backdrop-filter: blur(4px);
    }
    .media{aspect-ratio:4/3;background:#f3efe9}
    .body{padding:18px 18px 16px;display:flex;flex-direction:column;gap:8px}
    .title{font-family:"Playfair Display",serif;font-size:22px}
    .price{margin-left:auto;font-weight:700;color:var(--accent)}
    .meta{color:#8a7e77;font-size:14px}
    .desc{color:#5b524c;font-size:15px}
    .buy{margin-top:auto;background:#E7B07A;color:#3b2f29;border:none;border-radius:10px;
         padding:12px 14px;font-weight:700;display:flex;align-items:center;justify-content:center;gap:10px}
    .buy:hover{filter:brightness(0.95);cursor:pointer}

    /* Basket */
    .basket-layout{
      display:grid;grid-template-columns:2fr 1fr;gap:24px;align-items:start
    }
    .basket-left,.basket-right{
      background:rgba(255,255,255,0.94);border:1px solid var(--line);border-radius:16px;box-shadow:var(--shadow);
      padding:18px; backdrop-filter: blur(4px);
    }
    .basket-title{font-family:"Playfair Display",serif;font-size:34px;margin:0 0 8px;text-shadow:0 1px 0 #fff}
    .basket-item{
      display:grid;grid-template-columns:72px 1fr auto;gap:14px;align-items:center;
      padding:12px 0;border-bottom:1px dashed var(--line)
    }
    .basket-item:last-child{border-bottom:none}
    .qty{
      display:inline-flex;align-items:center;border:1px solid var(--line);border-radius:12px;
      overflow:hidden;background:#fff
    }
    .qty button{
      background:#f3efe9;border:none;padding:6px 10px;cursor:pointer;font-weight:900
    }
    .qty input{
      width:44px;text-align:center;border:none;padding:6px 0;font-weight:700
    }
    .rmv{background:transparent;border:none;color:#b71c1c;cursor:pointer;font-weight:700}
    .sum-row{display:flex;justify-content:space-between;margin:8px 0;color:#5b524c}
    .sum-row.total{font-weight:800;font-size:1.1rem;color:var(--ink);border-top:1px dashed var(--line);padding-top:10px}
    .order-btn{
      width:100%;margin-top:12px;background:var(--accent);color:#fff;border:none;border-radius:12px;
      padding:14px 16px;font-weight:800;cursor:pointer;box-shadow:0 8px 18px rgba(191,123,48,0.25)
    }
    .empty{color:#8a7e77}

    /* Checkout */
    .checkout{
      max-width:820px;margin:0 auto;background:rgba(255,255,255,0.96);border:1px solid var(--line);
      border-radius:16px;box-shadow:var(--shadow);padding:20px; backdrop-filter: blur(4px);
    }
    .note{background:#fff7ec;border:1px solid #f3e0c9;color:#6e4d27;padding:10px 12px;border-radius:10px;margin:10px 0}

    /* Footer */
    footer{border-top:1px solid var(--line);padding:22px 0;color:#8a7e77;text-align:center;background:rgba(255,255,255,0.8);backdrop-filter: blur(4px)}

    /* Responsive */
    @media (max-width:1000px){
      .hero{grid-template-columns:1fr;gap:16px}
      .hero .copy h1{font-size:42px}
      .grid{grid-template-columns:1fr 1fr}
      .basket-layout{grid-template-columns:1fr}
    }
    @media (max-width:640px){
      .grid{grid-template-columns:1fr}
      .brand span{font-size:24px}
    }
  </style>
</head>
<body>
  <!-- Header -->
  <header class="site-header">
    <div class="nav wrap">
      <div class="brand">
        <img src="image.jpeg" alt="Aviruchi logo">
        <span>Aviruchi</span>
      </div>
      <nav class="tabs" aria-label="Primary">
        <a href="#home" data-tab="home" class="active">Home</a>
        <a href="#products" data-tab="products">Products</a>
        <a href="#about" data-tab="about">About</a>
        <a href="#basket" data-tab="basket" class="cart">Basket <span class="count" id="cartCount">0</span></a>
      </nav>
    </div>
  </header>

  <!-- Main -->
  <main class="wrap">
    <!-- Home (with search like Asda) -->
    <section id="home" class="tab active" role="region" aria-labelledby="home-tab">
      <div class="hero">
        <div class="copy">
          <h1>Welcome to Aviruchi</h1>
          <p>Authentic Indian sweets, freshly made and imported from India to the UK. Delivered to your doorstep with care and tradition.</p>

          <!-- Search bar -->
          <div class="search-row">
            <input id="searchInput" type="text" placeholder="Search sweets, e.g. gulab jamun, kaju, rasgulla..." />
            <button id="searchBtn" type="button">Search</button>
          </div>
          <div class="search-hint" id="searchHint">Tip: Start typing to instantly filter our sweet collection below.</div>

          <a href="#products" class="cta" data-tab="products">Browse sweets →</a>
        </div>
        <div class="plate">
          <img src="https://user-gen-media-assets.s3.amazonaws.com/gemini_images/3ad76d18-e30a-482b-8711-4a058d223598.png" alt="Aviruchi sweets plate">
        </div>
      </div>

      <!-- Products preview under search (same grid as Products tab, for Asda-style flow) -->
      <div class="section">
        <h2>Shop by favourites</h2>
        <p class="lead">Use the search bar to quickly find your favourite sweets and add them straight to your basket.</p>
      </div>
      <div class="grid" id="productGridHome">
        <!-- Cards will be cloned from main config by JS -->
      </div>
    </section>

    <!-- Products full tab -->
    <section id="products" class="tab" role="region" aria-labelledby="products-tab">
      <div class="section">
        <h2>All Sweets</h2>
        <p class="lead">Handcrafted traditional Indian sweets, made fresh with authentic recipes and the finest ingredients.</p>
      </div>

      <div class="grid" id="productGrid">
        <!-- Card 1 -->
        <article class="card" data-name="kaju katli" data-tags="kaju katli cashew barfi fudge">
          <div class="media">
            <img src="https://images.unsplash.com/photo-1608031833506-a3f60bd7a0c5?q=80&w=1200&auto=format&fit=crop" alt="Kaju Katli">
          </div>
          <div class="body">
            <div style="display:flex;align-items:center;gap:10px">
              <h3 class="title">Kaju Katli</h3>
              <div class="price">£18.99</div>
            </div>
            <div class="meta">500g</div>
            <p class="desc">Classic cashew fudge with silver leaf, melt‑in‑your‑mouth delicious.</p>
            <button class="buy" type="button"
              data-id="kaju-katli" data-name="Kaju Katli" data-price="18.99"
              data-img="https://images.unsplash.com/photo-1608031833506-a3f60bd7a0c5?q=80&w=1200&auto=format&fit=crop">Add to Basket</button>
          </div>
        </article>

        <!-- Card 2 -->
        <article class="card" data-name="gulab jamun" data-tags="gulab jamun syrup dumplings">
          <div class="media">
            <img src="https://images.unsplash.com/photo-1626204574812-fd2f6d5b3e2c?q=80&w=1200&auto=format&fit=crop" alt="Gulab Jamun">
          </div>
          <div class="body">
            <div style="display:flex;align-items:center;gap:10px">
              <h3 class="title">Gulab Jamun</h3>
              <div class="price">£12.99</div>
            </div>
            <div class="meta">12 pieces</div>
            <p class="desc">Soft golden dumplings in fragrant rose syrup.</p>
            <button class="buy" type="button"
              data-id="gulab-jamun" data-name="Gulab Jamun" data-price="12.99"
              data-img="https://images.unsplash.com/photo-1626204574812-fd2f6d5b3e2c?q=80&w=1200&auto=format&fit=crop">Add to Basket</button>
          </div>
        </article>

        <!-- Card 3 -->
        <article class="card" data-name="rasgulla" data-tags="rasgulla cheese balls syrup">
          <div class="media">
            <img src="https://images.unsplash.com/photo-1668236548746-8e59b9a5b1d7?q=80&w=1200&auto=format&fit=crop" alt="Rasgulla">
          </div>
          <div class="body">
            <div style="display:flex;align-items:center;gap:10px">
              <h3 class="title">Rasgulla</h3>
              <div class="price">£10.99</div>
            </div>
            <div class="meta">10 pieces</div>
            <p class="desc">Spongy cheese balls in light sugar syrup.</p>
            <button class="buy" type="button"
              data-id="rasgulla" data-name="Rasgulla" data-price="10.99"
              data-img="https://images.unsplash.com/photo-1668236548746-8e59b9a5b1d7?q=80&w=1200&auto=format&fit=crop">Add to Basket</button>
          </div>
        </article>
      </div>
    </section>

    <!-- About -->
    <section id="about" class="tab" role="region" aria-labelledby="about-tab">
      <div class="about">
        <h1>About Aviruchi</h1>
        <div class="text">
          <p>Aviruchi brings the authentic taste of India to the United Kingdom. Our mission is to share the rich tradition of Indian sweets with families across the UK, delivering freshly made confections that capture the essence of Indian culinary heritage.</p>
          <p class="block">Every sweet we offer is crafted using traditional recipes passed down through generations. We work directly with master sweet makers in India who use only the finest ingredients — pure ghee, premium nuts, authentic spices, and time‑honored techniques — to create confections that taste just like home.</p>
          <p class="block">From our family to yours, we carefully package and deliver these delicacies right to your doorstep. Whether you’re celebrating a special occasion, hosting guests, or simply craving a taste of tradition, Aviruchi ensures you receive the freshest, most authentic Indian sweets available in the UK.</p>
        </div>
      </div>
    </section>

    <!-- Basket (cart) -->
    <section id="basket" class="tab" role="region" aria-labelledby="basket-tab">
      <h2 class="basket-title">Your Basket</h2>
      <div class="basket-layout">
        <!-- Left: items -->
        <div class="basket-left">
          <div id="basketItems" class="empty">Your basket is empty.</div>
        </div>

        <!-- Right: summary -->
        <aside class="basket-right">
          <h3 style="margin:0 0 8px;font-family:'Playfair Display',serif;">Summary</h3>
          <div class="sum-row"><span>Items</span><span id="sumItems">0</span></div>
          <div class="sum-row"><span>Subtotal</span><span>£<span id="sumSubtotal">0.00</span></span></div>
          <div class="sum-row"><span>Delivery</span><span>£<span id="sumDelivery">3.99</span></span></div>
          <div class="sum-row total"><span>Total</span><span>£<span id="sumTotal">0.00</span></span></div>
          <button id="orderNow" class="order-btn" disabled>Order Now</button>
          <div id="basketMsg" class="note" style="display:none">Add items to enable checkout.</div>
        </aside>
      </div>
    </section>

    <!-- Checkout (protected view) -->
    <section id="checkout" class="tab" role="region" aria-labelledby="checkout-tab">
      <div class="checkout">
        <h2 style="font-family:'Playfair Display',serif;margin-top:0">Checkout</h2>
        <div class="note">This page is accessible only via Order Now from the Basket.</div>

        <h3 style="font-family:'Playfair Display',serif;margin:12px 0 8px">Order Summary</h3>
        <div id="checkoutSummary" style="border:1px dashed var(--line);border-radius:12px;padding:12px;margin-bottom:14px"></div>

        <form id="checkoutForm">
          <div style="display:grid;grid-template-columns:1fr 1fr;gap:12px">
            <label>Full Name
              <input required name="name" style="width:100%;padding:10px;border:1px solid var(--line);border-radius:10px">
            </label>
            <label>Email
              <input required type="email" name="email" style="width:100%;padding:10px;border:1px solid var(--line);border-radius:10px">
            </label>
          </div>
          <label style="display:block;margin-top:12px">Address
            <input required name="addr" style="width:100%;padding:10px;border:1px solid var(--line);border-radius:10px">
          </label>
          <div style="display:grid;grid-template-columns:2fr 1fr;gap:12px;margin-top:12px">
            <label>City
              <input required name="city" style="width:100%;padding:10px;border:1px solid var(--line);border-radius:10px">
            </label>
            <label>Postcode
              <input required name="pc" style="width:100%;padding:10px;border:1px solid var(--line);border-radius:10px">
            </label>
          </div>
          <button type="submit" class="order-btn" style="margin-top:16px;background:var(--ok)">Place Order</button>
        </form>
        <div id="checkoutNote" class="note" style="display:none;margin-top:12px"></div>
      </div>
    </section>
  </main>

  <!-- Footer -->
  <footer>
    © 2025 Aviruchi • Freshly made in India • Delivered across the UK
  </footer>

  <!-- Scripts -->
  <script>
    /* Cart state with localStorage persistence */
    const CART_KEY = 'aviruchi_cart_v1';
    let cart = loadCart();
    let checkoutGate = false; // Only true when Order Now is pressed

    function loadCart(){
      try { return JSON.parse(localStorage.getItem(CART_KEY)) || {}; }
      catch { return {}; }
    }
    function saveCart(){
      localStorage.setItem(CART_KEY, JSON.stringify(cart));
      updateCartCount();
    }

    function cartItems(){ return Object.values(cart); }
    function addToCart(item){
      if(cart[item.id]) cart[item.id].qty += 1;
      else cart[item.id] = {...item, qty:1};
      saveCart(); renderBasket();
    }
    function updateQty(id, qty){
      if(qty <= 0){ delete cart[id]; } else { cart[id].qty = qty; }
      saveCart(); renderBasket();
    }
    function removeItem(id){ delete cart[id]; saveCart(); renderBasket(); }

    function totals(){
      const items = cartItems();
      const subtotal = items.reduce((s,i)=> s + i.price * i.qty, 0);
      const count = items.reduce((s,i)=> s + i.qty, 0);
      const delivery = items.length ? 3.99 : 0;
      const total = subtotal + delivery;
      return {count, subtotal, delivery, total};
    }
    function money(n){ return n.toFixed(2); }

    /* UI: Tabs */
    const tabs = document.querySelectorAll('.tabs a, a.cta');
    const sections = document.querySelectorAll('section.tab');

    function activate(tabName){
      if(tabName === 'checkout' && !checkoutGate){
        alert('Please proceed to Checkout from your Basket.');
        tabName = 'basket';
      }
      sections.forEach(s=>s.classList.toggle('active', s.id === tabName));
      document.querySelectorAll('.tabs a').forEach(a=>{
        a.classList.toggle('active', a.dataset.tab === tabName);
      });
      history.replaceState(null, '', '#'+tabName);
      window.scrollTo({top:0, behavior:'smooth'});
      if(tabName === 'basket'){ renderBasket(); }
      if(tabName === 'checkout'){ renderCheckout(); }
    }

    tabs.forEach(link=>{
      link.addEventListener('click', e=>{
        const t = link.dataset.tab;
        if(t){
          e.preventDefault();
          activate(t);
        }
      });
    });

    // Product buttons
    function wireBuyButtons(scope=document){
      scope.querySelectorAll('.buy').forEach(btn=>{
        btn.addEventListener('click', ()=>{
          const item = {
            id: btn.dataset.id,
            name: btn.dataset.name,
            price: parseFloat(btn.dataset.price),
            img: btn.dataset.img
          };
          addToCart(item);
          activate('basket');
        });
      });
    }
    wireBuyButtons(document);

    /* Basket rendering */
    const basketItemsEl = document.getElementById('basketItems');
    const sumItemsEl = document.getElementById('sumItems');
    const sumSubtotalEl = document.getElementById('sumSubtotal');
    const sumDeliveryEl = document.getElementById('sumDelivery');
    const sumTotalEl = document.getElementById('sumTotal');
    const orderNowBtn = document.getElementById('orderNow');
    const basketMsg = document.getElementById('basketMsg');

    function renderBasket(){
      const items = cartItems();
      if(!items.length){
        basketItemsEl.classList.add('empty');
        basketItemsEl.innerHTML = 'Your basket is empty.';
        orderNowBtn.disabled = true;
        basketMsg.style.display = 'block';
      } else {
        basketItemsEl.classList.remove('empty');
        basketMsg.style.display = 'none';
        basketItemsEl.innerHTML = items.map(i=>`
          <div class="basket-item">
            <img src="${i.img}" alt="${i.name}" style="width:72px;height:72px;object-fit:cover;border-radius:10px">
            <div>
              <div style="display:flex;gap:8px;align-items:center">
                <strong>${i.name}</strong>
                <span style="color:#6E645F">£${money(i.price)}</span>
              </div>
              <div class="qty" aria-label="Quantity">
                <button aria-label="decrease" onclick="qtyDec('${i.id}')">−</button>
                <input value="${i.qty}" inputmode="numeric" onchange="qtySet('${i.id}', this.value)">
                <button aria-label="increase" onclick="qtyInc('${i.id}')">+</button>
              </div>
              <button class="rmv" onclick="removeItem('${i.id}')">Remove</button>
            </div>
            <div style="font-weight:800">£${money(i.price * i.qty)}</div>
          </div>
        `).join('');
        orderNowBtn.disabled = false;
      }
      const t = totals();
      sumItemsEl.textContent = t.count;
      sumSubtotalEl.textContent = money(t.subtotal);
      sumDeliveryEl.textContent = money(t.delivery);
      sumTotalEl.textContent = money(t.total);
      updateCartCount();
    }

    // Quantity helpers
    window.qtyInc = id => updateQty(id, (cart[id]?.qty||0)+1);
    window.qtyDec = id => updateQty(id, (cart[id]?.qty||0)-1);
    window.qtySet = (id, val) => {
      const n = parseInt(val,10);
      if (isNaN(n) || n<0) return renderBasket();
      updateQty(id, n);
    };

    function updateCartCount(){
      const c = totals().count;
      document.getElementById('cartCount').textContent = c;
    }

    // Order Now -> set gate and go to checkout
    orderNowBtn.addEventListener('click', ()=>{
      if(!cartItems().length){ return; }
      checkoutGate = true;
      activate('checkout');
    });

    /* Checkout view */
    function renderCheckout(){
      const out = cartItems().map(i=>`
        <div style="display:flex;justify-content:space-between;gap:12px;border-bottom:1px dashed var(--line);padding:8px 0">
          <div style="display:flex;gap:10px;align-items:center">
            <img src="${i.img}" style="width:44px;height:44px;border-radius:8px;object-fit:cover" alt="${i.name}">
            <div><strong>${i.name}</strong><div style="color:#6E645F;font-size:12px">Qty ${i.qty}</div></div>
          </div>
          <div><strong>£${money(i.price * i.qty)}</strong></div>
        </div>
      `).join('');
      const t = totals();
      document.getElementById('checkoutSummary').innerHTML = out + `
        <div style="display:flex;justify-content:space-between;margin-top:8px"><span>Subtotal</span><strong>£${money(t.subtotal)}</strong></div>
        <div style="display:flex;justify-content:space-between"><span>Delivery</span><strong>£${money(t.delivery)}</strong></div>
        <div style="display:flex;justify-content:space-between;border-top:1px dashed var(--line);margin-top:8px;padding-top:8px">
          <span>Total</span><strong>£${money(t.total)}</strong></div>`;
    }

    // Demo submit
    document.getElementById('checkoutForm').addEventListener('submit', (e)=>{
      e.preventDefault();
      const t = totals();
      document.getElementById('checkoutNote').style.display = 'block';
      document.getElementById('checkoutNote').textContent =
        `Thank you! Your order for £${money(t.total)} has been received. A confirmation email will be sent shortly.`;
      cart = {};
      saveCart();
      updateCartCount();
    });

    // HOME PRODUCTS: clone main product cards into home grid (Asda-style search results directly under search bar)
    const homeGrid = document.getElementById('productGridHome');
    const mainGrid = document.getElementById('productGrid');
    homeGrid.innerHTML = mainGrid.innerHTML;
    wireBuyButtons(homeGrid);

    // Search: instant filter both home preview and full products grid, similar to grocery site search behaviour
    const searchInput = document.getElementById('searchInput');
    const searchBtn = document.getElementById('searchBtn');
    const searchHint = document.getElementById('searchHint');

    function applySearch(term){
      const q = term.trim().toLowerCase();
      const allCards = document.querySelectorAll('#productGrid article.card, #productGridHome article.card');
      let visible = 0;
      allCards.forEach(card=>{
        const name = card.dataset.name || '';
        const tags = card.dataset.tags || '';
        const hay = (name + ' ' + tags).toLowerCase();
        const show = !q || hay.includes(q);
        card.style.display = show ? '' : 'none';
        if(show) visible++;
      });
      if(q){
        searchHint.textContent = visible ? `Showing ${visible} result(s) for "${term}".` : `No results for "${term}". Try a different sweet name.`;
      } else {
        searchHint.textContent = 'Tip: Start typing to instantly filter our sweet collection below.';
      }
    }

    searchInput.addEventListener('input', ()=> applySearch(searchInput.value));
    searchBtn.addEventListener('click', ()=> applySearch(searchInput.value));

    // Deep-link support on load/refresh (protect checkout)
    const start = location.hash?.replace('#','') || 'home';
    if(start === 'checkout') { history.replaceState(null,'','#basket'); }
    activate(start === 'checkout' ? 'basket' : start);

    // Initial paint
    renderBasket();
  </script>
</body>
</html>
